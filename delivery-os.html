<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Delivery OS ‚Äî AI-Enabled Capital Project Intelligence</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=Instrument+Sans:ital,wght@0,400;0,500;0,600;1,400&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#07080c;
  --surface:#0e1018;
  --surface2:#141720;
  --border:#1e2230;
  --border2:#252a3a;
  --text:#e8eaf0;
  --muted:#6b7190;
  --accent:#00d4a0;
  --accent2:#0096ff;
  --warn:#ff8c42;
  --danger:#ff4560;
  --success:#00d4a0;
  --gold:#f5c842;
}


/* GRID BG */
body::before{
  content:'';
  position:fixed;inset:0;
  background-image:
    linear-gradient(rgba(0,212,160,0.03) 1px,transparent 1px),
    linear-gradient(90deg,rgba(0,212,160,0.03) 1px,transparent 1px);
  background-size:40px 40px;
  pointer-events:none;
  z-index:0;
}

/* ‚îÄ‚îÄ LAYOUT ‚îÄ‚îÄ */
.shell{display:flex;min-height:100vh;position:relative;z-index:1}

/* SIDEBAR */
.sidebar{
  width:220px;flex-shrink:0;
  background:var(--surface);
  border-right:1px solid var(--border);
  display:flex;flex-direction:column;
  position:fixed;top:52px;left:0;height:calc(100vh - 52px);
  z-index:100;
  transition:transform 0.3s ease;
}
.sidebar-logo{
  padding:24px 20px 20px;
  border-bottom:1px solid var(--border);
}
.logo-mark{
  font-family:'Syne',sans-serif;
  font-size:18px;font-weight:800;
  color:var(--accent);
  letter-spacing:-0.02em;
  display:flex;align-items:center;gap:8px;
}
.logo-mark svg{flex-shrink:0}
.logo-sub{font-size:10px;color:var(--muted);letter-spacing:0.12em;text-transform:uppercase;margin-top:3px}

.nav{flex:1;padding:16px 0;overflow-y:auto}
.nav-section{
  font-size:9px;font-weight:700;letter-spacing:0.18em;
  text-transform:uppercase;color:var(--muted);
  padding:12px 20px 6px;
}
.nav-item{
  display:flex;align-items:center;gap:10px;
  padding:9px 20px;
  cursor:pointer;
  font-size:13px;font-weight:500;color:var(--muted);
  transition:all 0.15s;
  border-left:2px solid transparent;
  position:relative;
}
.nav-item:hover{color:var(--text);background:rgba(255,255,255,0.03)}
.nav-item.active{
  color:var(--accent);
  background:rgba(0,212,160,0.06);
  border-left-color:var(--accent);
}
.nav-item .badge{
  margin-left:auto;
  background:var(--danger);
  color:#fff;font-size:9px;font-weight:700;
  padding:1px 5px;border-radius:8px;
}

.sidebar-footer{
  padding:16px 20px;
  border-top:1px solid var(--border);
  font-size:11px;color:var(--muted);
}
.project-selector{
  background:var(--surface2);
  border:1px solid var(--border2);
  border-radius:6px;
  padding:8px 10px;
  cursor:pointer;
  margin-top:8px;
}
.project-selector select{
  background:transparent;border:none;outline:none;
  color:var(--text);font-family:inherit;font-size:12px;
  font-weight:600;width:100%;cursor:pointer;
}
.project-selector select option{background:var(--surface2)}

/* MAIN */
.main{
  margin-left:220px;
  flex:1;
  display:flex;flex-direction:column;
  min-height:100vh;
}

/* TOPBAR */
.topbar{
  background:var(--surface);
  border-bottom:1px solid var(--border);
  padding:0 32px;
  height:56px;
  display:flex;align-items:center;justify-content:space-between;
  position:sticky;top:52px;z-index:50;
}
.topbar-title{
  font-family:'Syne',sans-serif;
  font-size:15px;font-weight:700;
  color:var(--text);
}
.topbar-right{display:flex;align-items:center;gap:16px}
.topbar-pill{
  background:rgba(0,212,160,0.1);
  border:1px solid rgba(0,212,160,0.2);
  color:var(--accent);
  font-size:11px;font-weight:600;
  letter-spacing:0.06em;
  padding:4px 12px;border-radius:20px;
}
.last-updated{font-size:11px;color:var(--muted)}

/* CONTENT */
.content{
  padding:32px;
  flex:1;
}

/* PAGES */
.page{display:none}
.page.active{display:block;animation:fadeIn 0.3s ease}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}

/* PAGE HEADER */
.page-header{
  display:flex;align-items:flex-start;justify-content:space-between;
  margin-bottom:28px;gap:16px;
}
.page-title{
  font-family:'Syne',sans-serif;
  font-size:24px;font-weight:800;
  color:var(--text);letter-spacing:-0.02em;
}
.page-subtitle{font-size:13px;color:var(--muted);margin-top:4px}
.btn{
  display:inline-flex;align-items:center;gap:7px;
  padding:9px 18px;border-radius:6px;
  font-family:inherit;font-size:12px;font-weight:600;
  letter-spacing:0.04em;cursor:pointer;
  border:none;transition:all 0.15s;
  text-transform:uppercase;
}
.btn-primary{background:var(--accent);color:#07080c}
.btn-primary:hover{background:#00f0b8;transform:translateY(-1px)}
.btn-ghost{background:transparent;color:var(--muted);border:1px solid var(--border2)}
.btn-ghost:hover{color:var(--text);border-color:var(--border2);background:var(--surface2)}
.btn-warn{background:var(--warn);color:#fff}

/* CARDS */
.card{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:10px;
  padding:20px;
}
.card-title{
  font-family:'Syne',sans-serif;
  font-size:12px;font-weight:700;
  letter-spacing:0.1em;text-transform:uppercase;
  color:var(--muted);margin-bottom:16px;
  display:flex;align-items:center;justify-content:space-between;
}

/* STAT CARDS */
.stats-row{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:24px}
.stat-card{
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:10px;
  padding:18px 20px;
  position:relative;overflow:hidden;
}
.stat-card::before{
  content:'';position:absolute;top:0;left:0;right:0;height:2px;
}
.stat-card.green::before{background:var(--accent)}
.stat-card.blue::before{background:var(--accent2)}
.stat-card.warn::before{background:var(--warn)}
.stat-card.danger::before{background:var(--danger)}
.stat-label{font-size:10px;font-weight:700;letter-spacing:0.14em;text-transform:uppercase;color:var(--muted);margin-bottom:8px}
.stat-value{
  font-family:'Syne',sans-serif;
  font-size:30px;font-weight:800;
  line-height:1;margin-bottom:6px;
}
.stat-value.green{color:var(--accent)}
.stat-value.blue{color:var(--accent2)}
.stat-value.warn{color:var(--warn)}
.stat-value.danger{color:var(--danger)}
.stat-delta{font-size:11px;color:var(--muted)}
.stat-delta span{font-weight:600}
.stat-delta .up{color:var(--danger)}
.stat-delta .down{color:var(--accent)}

/* GRID LAYOUTS */
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}
.grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:20px;margin-bottom:20px}
.grid-6040{display:grid;grid-template-columns:1.5fr 1fr;gap:20px;margin-bottom:20px}

/* ‚îÄ‚îÄ RISK TRACKER ‚îÄ‚îÄ */
.risk-table{width:100%;border-collapse:collapse}
.risk-table th{
  font-size:9px;font-weight:700;letter-spacing:0.14em;text-transform:uppercase;
  color:var(--muted);padding:8px 12px;text-align:left;
  border-bottom:1px solid var(--border);
}
.risk-table td{padding:12px 12px;border-bottom:1px solid var(--border);font-size:13px}
.risk-table tr:last-child td{border-bottom:none}
.risk-table tr:hover td{background:rgba(255,255,255,0.02)}
.risk-badge{
  display:inline-flex;align-items:center;
  padding:3px 10px;border-radius:20px;
  font-size:10px;font-weight:700;letter-spacing:0.06em;text-transform:uppercase;
}
.risk-badge.critical{background:rgba(255,69,96,0.15);color:var(--danger);border:1px solid rgba(255,69,96,0.3)}
.risk-badge.high{background:rgba(255,140,66,0.15);color:var(--warn);border:1px solid rgba(255,140,66,0.3)}
.risk-badge.medium{background:rgba(245,200,66,0.12);color:var(--gold);border:1px solid rgba(245,200,66,0.25)}
.risk-badge.low{background:rgba(0,212,160,0.1);color:var(--accent);border:1px solid rgba(0,212,160,0.2)}

.score-bar-wrap{width:100%;background:var(--border);border-radius:4px;height:6px;overflow:hidden}
.score-bar{height:6px;border-radius:4px;transition:width 0.6s ease}

/* SLIDERS */
.risk-input-section{margin-bottom:20px}
.risk-form{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.form-row{display:flex;flex-direction:column;gap:6px}
.form-label{font-size:11px;font-weight:600;color:var(--muted);letter-spacing:0.06em;text-transform:uppercase}
.form-input,.form-select,.form-textarea{
  background:var(--surface2);border:1px solid var(--border2);
  border-radius:6px;padding:8px 12px;
  color:var(--text);font-family:inherit;font-size:13px;
  outline:none;transition:border-color 0.15s;
  width:100%;
}
.form-input:focus,.form-select:focus,.form-textarea:focus{border-color:var(--accent)}
.form-select option{background:var(--surface2)}
.form-textarea{resize:vertical;min-height:64px}
.slider-row{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}
.slider-header{display:flex;justify-content:space-between;align-items:center}
.slider-label{font-size:11px;font-weight:600;color:var(--muted);letter-spacing:0.06em;text-transform:uppercase}
.slider-val{
  font-family:'Syne',sans-serif;font-size:14px;font-weight:700;
}
input[type=range]{
  -webkit-appearance:none;width:100%;height:4px;
  border-radius:2px;outline:none;cursor:pointer;
}
input[type=range]::-webkit-slider-thumb{
  -webkit-appearance:none;width:16px;height:16px;
  border-radius:50%;background:var(--accent);
  box-shadow:0 0 0 3px rgba(0,212,160,0.2);
  transition:box-shadow 0.2s;
}
input[type=range]::-webkit-slider-thumb:hover{box-shadow:0 0 0 6px rgba(0,212,160,0.15)}

/* RISK MATRIX */
.matrix{display:grid;grid-template-columns:repeat(5,1fr);gap:4px;padding:8px}
.matrix-cell{
  aspect-ratio:1;border-radius:4px;
  display:flex;align-items:center;justify-content:center;
  font-size:10px;font-weight:700;cursor:pointer;
  transition:transform 0.1s;
}
.matrix-cell:hover{transform:scale(1.05)}
.mc-1{background:rgba(0,212,160,0.15)}
.mc-2{background:rgba(245,200,66,0.18)}
.mc-3{background:rgba(255,140,66,0.2)}
.mc-4{background:rgba(255,69,96,0.25)}
.mc-5{background:rgba(255,69,96,0.4)}
.matrix-dot{
  width:8px;height:8px;border-radius:50%;
  background:var(--accent);position:absolute;
  transition:all 0.3s ease;
}

/* RISK SCORE GAUGE */
.gauge-wrap{display:flex;flex-direction:column;align-items:center;padding:16px 0}
.gauge-circle{
  width:120px;height:120px;border-radius:50%;
  background:conic-gradient(var(--accent) 0% 0%, var(--border) 0% 100%);
  display:flex;align-items:center;justify-content:center;
  position:relative;transition:background 0.5s ease;
}
.gauge-inner{
  width:90px;height:90px;border-radius:50%;
  background:var(--surface);
  display:flex;flex-direction:column;align-items:center;justify-content:center;
}
.gauge-score{font-family:'Syne',sans-serif;font-size:26px;font-weight:800}
.gauge-label{font-size:9px;color:var(--muted);letter-spacing:0.1em;text-transform:uppercase}

/* ‚îÄ‚îÄ SCHEDULE SEQUENCER ‚îÄ‚îÄ */
.phase-list{display:flex;flex-direction:column;gap:8px}
.phase-item{
  background:var(--surface2);border:1px solid var(--border);
  border-radius:8px;padding:14px 16px;
  display:flex;align-items:center;gap:12px;
  cursor:grab;transition:all 0.2s;
  position:relative;
}
.phase-item:hover{border-color:var(--border2);background:rgba(255,255,255,0.03)}
.phase-item.dragging{opacity:0.4;border-style:dashed}
.phase-drag{color:var(--muted);flex-shrink:0;font-size:16px}
.phase-num{
  font-family:'Syne',sans-serif;font-size:11px;font-weight:800;
  width:22px;height:22px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  background:var(--border);color:var(--muted);
  flex-shrink:0;
}
.phase-info{flex:1}
.phase-name{font-size:13px;font-weight:600;color:var(--text)}
.phase-meta{font-size:11px;color:var(--muted);margin-top:2px}
.phase-duration{
  font-family:'Syne',sans-serif;font-size:13px;font-weight:700;
  color:var(--muted);flex-shrink:0;
}
.phase-status{flex-shrink:0}
.conflict-flag{
  background:rgba(255,69,96,0.15);
  border:1px solid rgba(255,69,96,0.3);
  color:var(--danger);
  font-size:9px;font-weight:700;letter-spacing:0.08em;
  text-transform:uppercase;padding:2px 8px;border-radius:4px;
}
.ok-flag{
  background:rgba(0,212,160,0.1);
  border:1px solid rgba(0,212,160,0.2);
  color:var(--accent);
  font-size:9px;font-weight:700;letter-spacing:0.08em;
  text-transform:uppercase;padding:2px 8px;border-radius:4px;
}

/* GANTT */
.gantt-wrap{overflow-x:auto}
.gantt{min-width:600px}
.gantt-header{
  display:grid;grid-template-columns:180px 1fr;
  border-bottom:1px solid var(--border);
  padding-bottom:8px;margin-bottom:8px;
}
.gantt-label-head{font-size:10px;font-weight:700;letter-spacing:0.12em;text-transform:uppercase;color:var(--muted)}
.gantt-months{display:grid;grid-template-columns:repeat(12,1fr);gap:0}
.gantt-month{font-size:9px;color:var(--muted);text-align:center;font-weight:600}
.gantt-row{
  display:grid;grid-template-columns:180px 1fr;
  align-items:center;margin-bottom:8px;
}
.gantt-row-label{font-size:12px;color:var(--text);font-weight:500;padding-right:12px}
.gantt-timeline{position:relative;height:22px;display:grid;grid-template-columns:repeat(12,1fr)}
.gantt-bar{
  position:absolute;height:18px;border-radius:4px;
  display:flex;align-items:center;padding:0 8px;
  font-size:10px;font-weight:600;color:rgba(0,0,0,0.7);
  white-space:nowrap;overflow:hidden;
  transition:all 0.3s ease;
}
.gantt-today{
  position:absolute;top:0;bottom:0;width:1px;
  background:var(--warn);opacity:0.6;z-index:2;
}
.gantt-today::after{
  content:'Today';position:absolute;top:-18px;left:2px;
  font-size:8px;color:var(--warn);font-weight:700;
}

/* WHAT-IF */
.scenario-tabs{display:flex;gap:8px;margin-bottom:20px;flex-wrap:wrap}
.scenario-tab{
  padding:7px 16px;border-radius:6px;
  font-size:12px;font-weight:600;cursor:pointer;
  border:1px solid var(--border2);color:var(--muted);
  background:transparent;font-family:inherit;
  transition:all 0.15s;
}
.scenario-tab.active{background:var(--accent);color:#07080c;border-color:var(--accent)}
.scenario-tab:hover:not(.active){color:var(--text);border-color:var(--accent);background:rgba(0,212,160,0.06)}

.whatif-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}
.scenario-result{
  background:var(--surface2);border:1px solid var(--border2);
  border-radius:8px;padding:16px;
  display:flex;flex-direction:column;gap:12px;
}
.scenario-metric{display:flex;justify-content:space-between;align-items:center}
.scenario-metric-label{font-size:12px;color:var(--muted)}
.scenario-metric-val{
  font-family:'Syne',sans-serif;font-size:16px;font-weight:800;
}
.delta-pill{
  font-size:10px;font-weight:700;padding:2px 7px;border-radius:10px;margin-left:8px;
}
.delta-neg{background:rgba(255,69,96,0.15);color:var(--danger)}
.delta-pos{background:rgba(0,212,160,0.1);color:var(--accent)}

/* REPORT */
.report-section{margin-bottom:24px}
.report-header-bar{
  display:flex;align-items:center;gap:12px;
  background:var(--surface2);border:1px solid var(--border);
  border-radius:8px;padding:16px 20px;margin-bottom:20px;
}
.report-project-name{
  font-family:'Syne',sans-serif;font-size:16px;font-weight:800;
}
.report-date{font-size:11px;color:var(--muted);margin-top:2px}
.report-pillars{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:20px}
.report-pillar{
  background:var(--surface2);border:1px solid var(--border);
  border-radius:8px;padding:16px;text-align:center;
}
.report-pillar-score{
  font-family:'Syne',sans-serif;font-size:36px;font-weight:800;
  line-height:1;margin-bottom:6px;
}
.report-pillar-label{font-size:10px;color:var(--muted);letter-spacing:0.1em;text-transform:uppercase}
.report-pillar-status{font-size:11px;font-weight:600;margin-top:6px}

.findings-list{display:flex;flex-direction:column;gap:8px}
.finding-item{
  display:flex;gap-12px;align-items:flex-start;
  background:var(--surface2);border-left:3px solid var(--border2);
  border-radius:0 6px 6px 0;padding:12px 14px;gap:12px;
}
.finding-item.critical-f{border-left-color:var(--danger)}
.finding-item.warn-f{border-left-color:var(--warn)}
.finding-item.ok-f{border-left-color:var(--accent)}
.finding-icon{font-size:16px;flex-shrink:0;margin-top:1px}
.finding-body{flex:1}
.finding-title{font-size:13px;font-weight:600;color:var(--text);margin-bottom:2px}
.finding-desc{font-size:12px;color:var(--muted);line-height:1.5}

.export-bar{
  display:flex;gap:10px;padding:16px 20px;
  background:var(--surface);border:1px solid var(--border);
  border-radius:8px;align-items:center;justify-content:space-between;
}
.export-label{font-size:12px;color:var(--muted)}
.export-actions{display:flex;gap:8px}

/* DASHBOARD */
.health-ring-row{display:flex;gap:24px;align-items:center;justify-content:center;padding:20px 0}
.health-ring{display:flex;flex-direction:column;align-items:center;gap:8px}
.ring-svg{transform:rotate(-90deg)}
.ring-label{font-size:11px;color:var(--muted);letter-spacing:0.08em;text-transform:uppercase;margin-top:4px}
.ring-score{font-family:'Syne',sans-serif;font-size:18px;font-weight:800}

.activity-feed{display:flex;flex-direction:column;gap:1px}
.activity-item{
  display:flex;gap:12px;align-items:flex-start;
  padding:10px 0;border-bottom:1px solid var(--border);
}
.activity-item:last-child{border-bottom:none}
.activity-dot{
  width:8px;height:8px;border-radius:50%;flex-shrink:0;
  margin-top:5px;
}
.activity-text{font-size:12px;color:var(--muted);line-height:1.5}
.activity-text strong{color:var(--text);font-weight:600}
.activity-time{font-size:10px;color:var(--muted);flex-shrink:0;margin-top:2px}

/* TOOLTIP */
.tooltip{
  position:relative;
}
.tooltip::after{
  content:attr(data-tip);
  position:absolute;bottom:calc(100% + 6px);left:50%;transform:translateX(-50%);
  background:var(--surface2);border:1px solid var(--border2);
  color:var(--text);font-size:11px;padding:5px 10px;border-radius:5px;
  white-space:nowrap;pointer-events:none;
  opacity:0;transition:opacity 0.15s;
}
.tooltip:hover::after{opacity:1}

/* PROGRESS */
.progress-track{
  background:var(--border);border-radius:4px;height:8px;
  overflow:hidden;margin-top:6px;
}
.progress-fill{height:100%;border-radius:4px;transition:width 0.5s ease}

/* EMPTY & MISC */
.divider{height:1px;background:var(--border);margin:20px 0}
.tag{
  display:inline-flex;align-items:center;
  background:var(--surface2);border:1px solid var(--border);
  color:var(--muted);font-size:10px;font-weight:600;
  padding:2px 8px;border-radius:4px;
  letter-spacing:0.06em;text-transform:uppercase;
}

/* RESPONSIVE */
@media(max-width:900px){
  .sidebar{transform:translateX(-100%)}
  .sidebar.open{transform:translateX(0)}
  .main{margin-left:0}
  .stats-row{grid-template-columns:1fr 1fr}
  .grid-2,.grid-3,.whatif-grid,.report-pillars{grid-template-columns:1fr}
  .grid-6040{grid-template-columns:1fr}
}

/* NOTIFICATION DOT */
.notif{
  position:relative;
}
.notif::after{
  content:'';position:absolute;top:0;right:0;
  width:6px;height:6px;border-radius:50%;
  background:var(--danger);
  border:1px solid var(--bg);
}

/* ADD RISK MODAL */
.modal-overlay{
  position:fixed;inset:0;background:rgba(0,0,0,0.7);
  z-index:200;display:none;align-items:center;justify-content:center;
  backdrop-filter:blur(4px);
}
.modal-overlay.open{display:flex}
.modal{
  background:var(--surface);border:1px solid var(--border2);
  border-radius:12px;padding:28px;width:540px;max-width:95vw;
  max-height:90vh;overflow-y:auto;
  animation:fadeIn 0.2s ease;
}
.modal-title{
  font-family:'Syne',sans-serif;font-size:18px;font-weight:800;
  margin-bottom:20px;display:flex;align-items:center;justify-content:space-between;
}
.modal-close{
  background:transparent;border:none;color:var(--muted);
  font-size:20px;cursor:pointer;line-height:1;
}
.modal-close:hover{color:var(--text)}
.modal-footer{display:flex;gap:10px;justify-content:flex-end;margin-top:20px}
</style>
</head>
<body>
<!-- SHARED NAV -->
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@700&family=Instrument+Sans:wght@400;600&display=swap" rel="stylesheet">
<style>
#shared-nav{
  position:fixed;top:0;left:0;right:0;z-index:99999;
  height:52px;background:#07080c;border-bottom:1px solid #1e2230;
  display:flex;align-items:center;justify-content:space-between;
  padding:0 32px;font-family:'Instrument Sans',sans-serif;
}
.snav-brand{display:flex;align-items:center;gap:10px;}
.snav-pip{display:grid;grid-template-columns:1fr 1fr;gap:3px;width:16px;height:16px;}
.snav-pip span{border-radius:2px;}
.snav-pip span:nth-child(1){background:#00d4a0;}
.snav-pip span:nth-child(2){background:#0096ff;opacity:.6;}
.snav-pip span:nth-child(3){background:#00d4a0;opacity:.4;}
.snav-pip span:nth-child(4){background:#c8410f;}
.snav-wordmark{font-family:'Syne',sans-serif;font-size:13px;font-weight:700;color:#e8eaf0;letter-spacing:.02em;}
.snav-wordmark em{color:#00d4a0;font-style:normal;}
.snav-tabs{display:flex;gap:4px;}
.snav-tab{
  display:flex;align-items:center;gap:7px;
  padding:6px 18px;border-radius:6px;
  font-size:11px;font-weight:600;letter-spacing:.06em;text-transform:uppercase;
  cursor:pointer;font-family:'Instrument Sans',sans-serif;
  text-decoration:none;transition:all .15s ease;
}
.snav-tab.active{background:#00d4a0;color:#07080c;border:1px solid #00d4a0;}
.snav-tab:not(.active){background:transparent;color:#6b7190;border:1px solid #1e2230;}
.snav-tab:not(.active):hover{color:#e8eaf0;border-color:#252a3a;background:#0e1018;}
.snav-tab svg{width:13px;height:13px;flex-shrink:0;}
.snav-meta{font-size:11px;color:#6b7190;letter-spacing:.03em;}
.snav-meta strong{color:#e8eaf0;font-weight:600;}
</style>
<nav id="shared-nav">
  <div class="snav-brand">
    <div class="snav-pip"><span></span><span></span><span></span><span></span></div>
    <div class="snav-wordmark">AI <em>Delivery OS</em></div>
  </div>
  <div class="snav-tabs">
    <a class="snav-tab " href="https://cornfedin1980.github.io/AI-Delivery-OS/">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
      One Pager
    </a>
    <a class="snav-tab active" href="https://cornfedin1980.github.io/AI-Delivery-OS/delivery-os.html">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
      Live Tool
    </a>
  </div>
  <div class="snav-meta"><strong>Cornell D. Shephard</strong>&nbsp;¬∑&nbsp;MSc, PMP</div>
</nav>
<!-- END SHARED NAV -->

<!-- MODAL: Add Risk -->
<div class="modal-overlay" id="riskModal">
  <div class="modal">
    <div class="modal-title">
      Log New Risk
      <button class="modal-close" onclick="closeModal()">√ó</button>
    </div>
    <div class="risk-form">
      <div class="form-row" style="grid-column:1/-1">
        <label class="form-label">Risk Title</label>
        <input class="form-input" id="newRiskTitle" placeholder="e.g. MEP lead time compression">
      </div>
      <div class="form-row">
        <label class="form-label">Category</label>
        <select class="form-select" id="newRiskCat">
          <option>Schedule</option>
          <option>Cost</option>
          <option>Quality</option>
          <option>Safety</option>
          <option>Procurement</option>
          <option>Permitting</option>
        </select>
      </div>
      <div class="form-row">
        <label class="form-label">Owner</label>
        <input class="form-input" id="newRiskOwner" placeholder="Responsible party">
      </div>
    </div>
    <div style="margin-top:16px">
      <div class="slider-row">
        <div class="slider-header">
          <span class="slider-label">Probability</span>
          <span class="slider-val" id="probVal" style="color:var(--warn)">50%</span>
        </div>
        <input type="range" min="0" max="100" value="50" id="probSlider" oninput="updateSlider('prob',this.value)" style="background:linear-gradient(to right,var(--warn) 50%,var(--border) 50%)">
      </div>
      <div class="slider-row">
        <div class="slider-header">
          <span class="slider-label">Impact (1‚Äì5)</span>
          <span class="slider-val" id="impactVal" style="color:var(--danger)">3</span>
        </div>
        <input type="range" min="1" max="5" value="3" id="impactSlider" oninput="updateSlider('impact',this.value)" style="background:linear-gradient(to right,var(--danger) 60%,var(--border) 60%)">
      </div>
    </div>
    <div class="form-row" style="margin-top:12px">
      <label class="form-label">Mitigation Plan</label>
      <textarea class="form-textarea" id="newRiskMit" placeholder="Describe mitigation steps..."></textarea>
    </div>
    <div class="modal-footer">
      <button class="btn btn-ghost" onclick="closeModal()">Cancel</button>
      <button class="btn btn-primary" onclick="addRisk()">Log Risk</button>
    </div>
  </div>
</div>

<div class="shell">
  <!-- SIDEBAR -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-logo">
      <div class="logo-mark">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <rect x="2" y="2" width="7" height="7" rx="1.5" fill="var(--accent)" opacity="0.9"/>
          <rect x="11" y="2" width="7" height="7" rx="1.5" fill="var(--accent2)" opacity="0.6"/>
          <rect x="2" y="11" width="7" height="7" rx="1.5" fill="var(--accent)" opacity="0.4"/>
          <rect x="11" y="11" width="7" height="7" rx="1.5" fill="var(--accent)" opacity="1"/>
        </svg>
        Delivery OS
      </div>
      <div class="logo-sub">Capital Project Intelligence</div>
    </div>

    <nav class="nav">
      <div class="nav-section">Command</div>
      <div class="nav-item active" onclick="showPage('dashboard',this)">
        <svg width="15" height="15" viewBox="0 0 15 15" fill="currentColor"><rect x="1" y="1" width="5" height="5" rx="1"/><rect x="9" y="1" width="5" height="5" rx="1"/><rect x="1" y="9" width="5" height="5" rx="1"/><rect x="9" y="9" width="5" height="5" rx="1"/></svg>
        Dashboard
      </div>

      <div class="nav-section">Modules</div>
      <div class="nav-item notif" onclick="showPage('risk',this)">
        <svg width="15" height="15" viewBox="0 0 15 15" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M7.5 1L13.5 12H1.5L7.5 1Z"/><line x1="7.5" y1="5.5" x2="7.5" y2="8.5"/><circle cx="7.5" cy="10.5" r="0.5" fill="currentColor"/></svg>
        Risk Tracker
        <span class="badge">3</span>
      </div>
      <div class="nav-item" onclick="showPage('schedule',this)">
        <svg width="15" height="15" viewBox="0 0 15 15" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="1.5" y="2.5" width="12" height="11" rx="1.5"/><line x1="5" y1="1" x2="5" y2="4"/><line x1="10" y1="1" x2="10" y2="4"/><line x1="1.5" y1="6.5" x2="13.5" y2="6.5"/></svg>
        Schedule Sequencer
      </div>
      <div class="nav-item" onclick="showPage('whatif',this)">
        <svg width="15" height="15" viewBox="0 0 15 15" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 12L6 8L9 10L12 5"/><circle cx="12" cy="5" r="1.5" fill="currentColor" stroke="none"/></svg>
        What-If Scenarios
      </div>
      <div class="nav-item" onclick="showPage('report',this)">
        <svg width="15" height="15" viewBox="0 0 15 15" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2.5" y="1.5" width="10" height="12" rx="1.5"/><line x1="5" y1="5" x2="10" y2="5"/><line x1="5" y1="7.5" x2="10" y2="7.5"/><line x1="5" y1="10" x2="8" y2="10"/></svg>
        Auto-Report
      </div>

      <div class="nav-section">Settings</div>
      <div class="nav-item" onclick="showPage('settings',this)">
        <svg width="15" height="15" viewBox="0 0 15 15" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="7.5" cy="7.5" r="2.5"/><path d="M7.5 1.5v1M7.5 12.5v1M1.5 7.5h1M12.5 7.5h1M3.4 3.4l.7.7M10.9 10.9l.7.7M10.9 3.4l-.7.7M3.4 10.9l.7.7"/></svg>
        Project Settings
      </div>
    </nav>

    <div class="sidebar-footer">
      <div style="font-size:10px;font-weight:700;letter-spacing:0.1em;text-transform:uppercase;color:var(--muted);margin-bottom:6px">Active Project</div>
      <div class="project-selector">
        <select id="projectSelect" onchange="switchProject(this.value)">
          <option value="dc1">DC-Phoenix-01</option>
          <option value="dc2">DC-Austin-02</option>
          <option value="dev1">Mixed-Use Denver</option>
        </select>
      </div>
    </div>
  </aside>

  <!-- MAIN -->
  <div class="main">
    <!-- TOPBAR -->
    <div class="topbar">
      <div class="topbar-title" id="topbarTitle">Project Command Center</div>
      <div class="topbar-right">
        <div class="last-updated" id="liveTime"></div>
        <div class="topbar-pill">‚óè Live</div>
      </div>
    </div>

    <!-- CONTENT -->
    <div class="content">

      <!-- ‚îÄ‚îÄ DASHBOARD ‚îÄ‚îÄ -->
      <div class="page active" id="page-dashboard">
        <div class="page-header">
          <div>
            <div class="page-title">Project Command Center</div>
            <div class="page-subtitle" id="dashSubtitle">DC-Phoenix-01 ¬∑ Week 22 of 52 ¬∑ Updated just now</div>
          </div>
          <button class="btn btn-primary" onclick="showPage('report',document.querySelector('[onclick*=report]'))">‚Üó Generate Report</button>
        </div>

        <div class="stats-row">
          <div class="stat-card green">
            <div class="stat-label">Schedule Health</div>
            <div class="stat-value green" id="dashSched">84%</div>
            <div class="stat-delta">vs. baseline <span class="down">‚ñº 2pts</span> this week</div>
          </div>
          <div class="stat-card blue">
            <div class="stat-label">Budget Variance</div>
            <div class="stat-value blue" id="dashBudget">+3.2%</div>
            <div class="stat-delta">Over plan <span class="up">‚ñ≤ $1.4M</span> to date</div>
          </div>
          <div class="stat-card warn">
            <div class="stat-label">Open Risks</div>
            <div class="stat-value warn" id="dashRisks">7</div>
            <div class="stat-delta"><span class="up">3 critical</span>, 4 medium</div>
          </div>
          <div class="stat-card danger">
            <div class="stat-label">Critical Path Slack</div>
            <div class="stat-value danger">‚àí4d</div>
            <div class="stat-delta">MEP procurement <span class="up">‚ñ≤ compressing</span></div>
          </div>
        </div>

        <div class="grid-6040">
          <div class="card">
            <div class="card-title">Delivery Health ‚Äî All Pillars</div>
            <div class="health-ring-row">
              <div class="health-ring">
                <svg width="80" height="80" class="ring-svg">
                  <circle cx="40" cy="40" r="32" fill="none" stroke="var(--border)" stroke-width="8"/>
                  <circle cx="40" cy="40" r="32" fill="none" stroke="var(--danger)" stroke-width="8"
                    stroke-dasharray="201" stroke-dashoffset="40" stroke-linecap="round"/>
                </svg>
                <div class="ring-score" style="color:var(--danger)">80%</div>
                <div class="ring-label">Risk</div>
              </div>
              <div class="health-ring">
                <svg width="80" height="80" class="ring-svg">
                  <circle cx="40" cy="40" r="32" fill="none" stroke="var(--border)" stroke-width="8"/>
                  <circle cx="40" cy="40" r="32" fill="none" stroke="var(--warn)" stroke-width="8"
                    stroke-dasharray="201" stroke-dashoffset="50" stroke-linecap="round"/>
                </svg>
                <div class="ring-score" style="color:var(--warn)">75%</div>
                <div class="ring-label">Schedule</div>
              </div>
              <div class="health-ring">
                <svg width="80" height="80" class="ring-svg">
                  <circle cx="40" cy="40" r="32" fill="none" stroke="var(--border)" stroke-width="8"/>
                  <circle cx="40" cy="40" r="32" fill="none" stroke="var(--accent)" stroke-width="8"
                    stroke-dasharray="201" stroke-dashoffset="22" stroke-linecap="round"/>
                </svg>
                <div class="ring-score" style="color:var(--accent)">89%</div>
                <div class="ring-label">Quality</div>
              </div>
              <div class="health-ring">
                <svg width="80" height="80" class="ring-svg">
                  <circle cx="40" cy="40" r="32" fill="none" stroke="var(--border)" stroke-width="8"/>
                  <circle cx="40" cy="40" r="32" fill="none" stroke="var(--accent2)" stroke-width="8"
                    stroke-dasharray="201" stroke-dashoffset="36" stroke-linecap="round"/>
                </svg>
                <div class="ring-score" style="color:var(--accent2)">82%</div>
                <div class="ring-label">Cost</div>
              </div>
            </div>
          </div>
          <div class="card">
            <div class="card-title">Live Activity Feed</div>
            <div class="activity-feed">
              <div class="activity-item">
                <div class="activity-dot" style="background:var(--danger)"></div>
                <div class="activity-text"><strong>Risk flagged:</strong> Switchgear lead time extended 6 wks by vendor</div>
                <div class="activity-time">2h ago</div>
              </div>
              <div class="activity-item">
                <div class="activity-dot" style="background:var(--warn)"></div>
                <div class="activity-text"><strong>Schedule:</strong> Phase 3 MEP installation pushed +8 days</div>
                <div class="activity-time">4h ago</div>
              </div>
              <div class="activity-item">
                <div class="activity-dot" style="background:var(--accent)"></div>
                <div class="activity-text"><strong>Milestone hit:</strong> Foundation pour complete ‚Äî on schedule</div>
                <div class="activity-time">1d ago</div>
              </div>
              <div class="activity-item">
                <div class="activity-dot" style="background:var(--accent2)"></div>
                <div class="activity-text"><strong>Report sent:</strong> Week 21 owner report auto-distributed</div>
                <div class="activity-time">2d ago</div>
              </div>
              <div class="activity-item">
                <div class="activity-dot" style="background:var(--muted)"></div>
                <div class="activity-text"><strong>What-if run:</strong> Scenario B (weather delay) shows 14d slip risk</div>
                <div class="activity-time">3d ago</div>
              </div>
            </div>
          </div>
        </div>

        <div class="grid-2">
          <div class="card">
            <div class="card-title">Critical Path Snapshot</div>
            <div style="display:flex;flex-direction:column;gap:10px;margin-top:4px">
              <div>
                <div style="display:flex;justify-content:space-between;margin-bottom:4px">
                  <span style="font-size:12px;font-weight:600">Site Work & Foundation</span>
                  <span style="font-size:12px;color:var(--accent)">Complete</span>
                </div>
                <div class="progress-track"><div class="progress-fill" style="width:100%;background:var(--accent)"></div></div>
              </div>
              <div>
                <div style="display:flex;justify-content:space-between;margin-bottom:4px">
                  <span style="font-size:12px;font-weight:600">Steel Structure</span>
                  <span style="font-size:12px;color:var(--accent2)">68%</span>
                </div>
                <div class="progress-track"><div class="progress-fill" style="width:68%;background:var(--accent2)"></div></div>
              </div>
              <div>
                <div style="display:flex;justify-content:space-between;margin-bottom:4px">
                  <span style="font-size:12px;font-weight:600">MEP Rough-In</span>
                  <span style="font-size:12px;color:var(--warn)">22% ‚ö†</span>
                </div>
                <div class="progress-track"><div class="progress-fill" style="width:22%;background:var(--warn)"></div></div>
              </div>
              <div>
                <div style="display:flex;justify-content:space-between;margin-bottom:4px">
                  <span style="font-size:12px;font-weight:600">Electrical / Switchgear</span>
                  <span style="font-size:12px;color:var(--danger)">0% ‚Äî At Risk</span>
                </div>
                <div class="progress-track"><div class="progress-fill" style="width:0%;background:var(--danger)"></div></div>
              </div>
              <div>
                <div style="display:flex;justify-content:space-between;margin-bottom:4px">
                  <span style="font-size:12px;font-weight:600">Commissioning & Turnover</span>
                  <span style="font-size:12px;color:var(--muted)">Pending</span>
                </div>
                <div class="progress-track"><div class="progress-fill" style="width:0%;background:var(--muted)"></div></div>
              </div>
            </div>
          </div>
          <div class="card">
            <div class="card-title">Top Risks This Week</div>
            <div style="display:flex;flex-direction:column;gap:8px">
              <div class="finding-item critical-f">
                <div class="finding-icon">üî¥</div>
                <div class="finding-body">
                  <div class="finding-title">Switchgear Lead Time +6 Weeks</div>
                  <div class="finding-desc">Vendor confirmed delay. Critical path impact: ‚àí6d schedule reserve.</div>
                </div>
              </div>
              <div class="finding-item warn-f">
                <div class="finding-icon">üü°</div>
                <div class="finding-body">
                  <div class="finding-title">Permit Review Lag ‚Äî AHJ</div>
                  <div class="finding-desc">Authority review queue running 3wks. Expedite filing submitted.</div>
                </div>
              </div>
              <div class="finding-item ok-f">
                <div class="finding-icon">üü¢</div>
                <div class="finding-body">
                  <div class="finding-title">Labor Rates ‚Äî Stabilizing</div>
                  <div class="finding-desc">Electrical sub confirmed GMP. No escalation risk through Q3.</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div><!-- /dashboard -->

      <!-- ‚îÄ‚îÄ RISK TRACKER ‚îÄ‚îÄ -->
      <div class="page" id="page-risk">
        <div class="page-header">
          <div>
            <div class="page-title">Risk Tracker</div>
            <div class="page-subtitle">Score, track, and manage all project risks with AI-weighted severity</div>
          </div>
          <button class="btn btn-primary" onclick="openModal()">+ Log Risk</button>
        </div>

        <div class="grid-6040">
          <div class="card">
            <div class="card-title">
              Active Risk Register
              <div style="display:flex;gap:6px">
                <select class="form-select" style="width:auto;padding:4px 8px;font-size:11px" onchange="filterRisks(this.value)">
                  <option value="all">All Categories</option>
                  <option value="Schedule">Schedule</option>
                  <option value="Cost">Cost</option>
                  <option value="Safety">Safety</option>
                  <option value="Procurement">Procurement</option>
                </select>
              </div>
            </div>
            <table class="risk-table" id="riskTable">
              <thead>
                <tr>
                  <th>Risk</th>
                  <th>Category</th>
                  <th>Severity</th>
                  <th>Score</th>
                  <th>Owner</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody id="riskBody"></tbody>
            </table>
          </div>
          <div style="display:flex;flex-direction:column;gap:16px">
            <div class="card">
              <div class="card-title">Overall Risk Score</div>
              <div class="gauge-wrap">
                <div class="gauge-circle" id="gaugeCircle">
                  <div class="gauge-inner">
                    <span class="gauge-score" id="gaugeScore" style="color:var(--warn)">62</span>
                    <span class="gauge-label">/ 100</span>
                  </div>
                </div>
                <div style="margin-top:12px;font-size:12px;color:var(--muted);text-align:center" id="gaugeStatus">Elevated ‚Äî 3 critical items require action</div>
              </div>
            </div>
            <div class="card">
              <div class="card-title">Risk Breakdown</div>
              <div style="display:flex;flex-direction:column;gap:10px" id="riskBreakdown">
                <div>
                  <div style="display:flex;justify-content:space-between;margin-bottom:4px">
                    <span style="font-size:12px;color:var(--danger);font-weight:600">Critical</span>
                    <span style="font-size:12px;color:var(--muted)" id="critCount">3</span>
                  </div>
                  <div class="progress-track"><div class="progress-fill" id="critBar" style="background:var(--danger);width:60%"></div></div>
                </div>
                <div>
                  <div style="display:flex;justify-content:space-between;margin-bottom:4px">
                    <span style="font-size:12px;color:var(--warn);font-weight:600">High</span>
                    <span style="font-size:12px;color:var(--muted)" id="highCount">2</span>
                  </div>
                  <div class="progress-track"><div class="progress-fill" id="highBar" style="background:var(--warn);width:40%"></div></div>
                </div>
                <div>
                  <div style="display:flex;justify-content:space-between;margin-bottom:4px">
                    <span style="font-size:12px;color:var(--gold);font-weight:600">Medium</span>
                    <span style="font-size:12px;color:var(--muted)" id="medCount">2</span>
                  </div>
                  <div class="progress-track"><div class="progress-fill" id="medBar" style="background:var(--gold);width:40%"></div></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div><!-- /risk -->

      <!-- ‚îÄ‚îÄ SCHEDULE SEQUENCER ‚îÄ‚îÄ -->
      <div class="page" id="page-schedule">
        <div class="page-header">
          <div>
            <div class="page-title">Schedule Sequencer</div>
            <div class="page-subtitle">Drag to reorder phases ‚Äî conflicts auto-detected in real time</div>
          </div>
          <div style="display:flex;gap:8px">
            <button class="btn btn-ghost" onclick="resetSequence()">‚Ü∫ Reset</button>
            <button class="btn btn-primary" onclick="optimizeSequence()">‚ö° AI Optimize</button>
          </div>
        </div>

        <div class="grid-6040">
          <div class="card">
            <div class="card-title">Phase Sequence <span style="font-weight:400;color:var(--muted);font-size:10px;margin-left:6px">drag to reorder</span></div>
            <div class="phase-list" id="phaseList"></div>
            <div style="margin-top:16px;padding:12px;background:var(--surface2);border-radius:6px;border:1px solid var(--border)">
              <div style="font-size:11px;font-weight:700;letter-spacing:0.08em;text-transform:uppercase;color:var(--muted);margin-bottom:8px">Sequencing Analysis</div>
              <div id="seqAnalysis" style="font-size:12px;color:var(--muted);line-height:1.6"></div>
            </div>
          </div>
          <div style="display:flex;flex-direction:column;gap:16px">
            <div class="card">
              <div class="card-title">Gantt Preview</div>
              <div class="gantt-wrap">
                <div class="gantt" id="ganttChart"></div>
              </div>
            </div>
            <div class="card">
              <div class="card-title">Duration Controls</div>
              <div id="durationSliders"></div>
            </div>
          </div>
        </div>
      </div><!-- /schedule -->

      <!-- ‚îÄ‚îÄ WHAT-IF SCENARIOS ‚îÄ‚îÄ -->
      <div class="page" id="page-whatif">
        <div class="page-header">
          <div>
            <div class="page-title">What-If Scenarios</div>
            <div class="page-subtitle">Model delays, cost changes, and scope impacts before they happen</div>
          </div>
        </div>

        <div class="scenario-tabs">
          <button class="scenario-tab active" onclick="selectScenario('base',this)">üìå Baseline</button>
          <button class="scenario-tab" onclick="selectScenario('weather',this)">üåß Weather Delay</button>
          <button class="scenario-tab" onclick="selectScenario('procurement',this)">üì¶ Procurement Slip</button>
          <button class="scenario-tab" onclick="selectScenario('scope',this)">üîß Scope Change</button>
          <button class="scenario-tab" onclick="selectScenario('labor',this)">üë∑ Labor Shortage</button>
        </div>

        <div class="card" style="margin-bottom:20px">
          <div class="card-title" id="scenarioTitle">Baseline Scenario</div>
          <div style="font-size:13px;color:var(--muted);margin-bottom:16px" id="scenarioDesc">Your current plan with no disruptions. Use this as the benchmark for all comparisons.</div>
          <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px" id="scenarioInputs">
          </div>
        </div>

        <div class="whatif-grid" id="scenarioResults"></div>

        <div class="card">
          <div class="card-title">Scenario Comparison</div>
          <div style="overflow-x:auto">
            <table class="risk-table" id="comparisonTable">
              <thead>
                <tr>
                  <th>Scenario</th>
                  <th>Total Duration</th>
                  <th>Estimated Cost</th>
                  <th>Risk Score</th>
                  <th>Revenue Impact</th>
                  <th>Recommendation</th>
                </tr>
              </thead>
              <tbody id="compBody"></tbody>
            </table>
          </div>
        </div>
      </div><!-- /whatif -->

      <!-- ‚îÄ‚îÄ AUTO-REPORT ‚îÄ‚îÄ -->
      <div class="page" id="page-report">
        <div class="page-header">
          <div>
            <div class="page-title">Auto-Report Generator</div>
            <div class="page-subtitle">One-click reports formatted for owners, lenders, and delivery teams</div>
          </div>
          <button class="btn btn-primary" onclick="generateReport()">‚ö° Generate Now</button>
        </div>

        <div class="grid-2" style="margin-bottom:20px">
          <div class="card">
            <div class="card-title">Report Configuration</div>
            <div style="display:flex;flex-direction:column;gap:12px">
              <div class="form-row">
                <label class="form-label">Report Type</label>
                <select class="form-select" id="reportType" onchange="updateReportConfig()">
                  <option>Owner / Developer Summary</option>
                  <option>Lender Draw Report</option>
                  <option>GC Look-Ahead (3-Week)</option>
                  <option>Executive Portfolio View</option>
                </select>
              </div>
              <div class="form-row">
                <label class="form-label">Reporting Period</label>
                <select class="form-select" id="reportPeriod">
                  <option>Weekly</option>
                  <option>Bi-Weekly</option>
                  <option>Monthly</option>
                </select>
              </div>
              <div class="form-row">
                <label class="form-label">Distribution</label>
                <input class="form-input" id="reportDist" value="owner@project.com, pm@contractor.com" placeholder="Email addresses...">
              </div>
              <div style="display:flex;gap:8px;flex-wrap:wrap" id="reportSections">
                <span class="tag" style="cursor:pointer;border-color:var(--accent);color:var(--accent)">‚úì Risk Summary</span>
                <span class="tag" style="cursor:pointer;border-color:var(--accent);color:var(--accent)">‚úì Schedule Status</span>
                <span class="tag" style="cursor:pointer;border-color:var(--accent);color:var(--accent)">‚úì Cost Variance</span>
                <span class="tag" style="cursor:pointer">Safety Metrics</span>
                <span class="tag" style="cursor:pointer">RFI Log</span>
              </div>
            </div>
          </div>
          <div class="card">
            <div class="card-title">Auto-Schedule</div>
            <div style="display:flex;flex-direction:column;gap:14px">
              <div style="padding:14px;background:rgba(0,212,160,0.06);border:1px solid rgba(0,212,160,0.15);border-radius:8px">
                <div style="font-size:12px;font-weight:600;color:var(--accent);margin-bottom:4px">Next Auto-Send</div>
                <div style="font-family:'Syne',sans-serif;font-size:20px;font-weight:800">Friday, 8:00 AM</div>
                <div style="font-size:11px;color:var(--muted);margin-top:2px">Owner / Developer Summary ‚Äî Week 23</div>
              </div>
              <div class="form-row">
                <label class="form-label">Send Day</label>
                <select class="form-select">
                  <option>Friday</option><option>Monday</option><option>Wednesday</option>
                </select>
              </div>
              <div class="form-row">
                <label class="form-label">Send Time</label>
                <select class="form-select">
                  <option>8:00 AM</option><option>12:00 PM</option><option>5:00 PM</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <!-- LIVE REPORT PREVIEW -->
        <div class="card" id="reportPreview">
          <div class="card-title">Report Preview ‚Äî Auto-Generated</div>
          <div class="report-header-bar">
            <div style="flex:1">
              <div class="report-project-name" id="rptProjectName">DC-Phoenix-01</div>
              <div class="report-date" id="rptDate">Week 22 Report ¬∑ Generated <span id="rptGenTime"></span></div>
            </div>
            <div class="topbar-pill">Owner Summary</div>
          </div>

          <div class="report-pillars" id="rptPillars">
            <div class="report-pillar">
              <div class="report-pillar-score" style="color:var(--warn)">62</div>
              <div class="report-pillar-label">Risk Score</div>
              <div class="report-pillar-status" style="color:var(--warn)">Elevated</div>
            </div>
            <div class="report-pillar">
              <div class="report-pillar-score" style="color:var(--accent2)">75</div>
              <div class="report-pillar-label">Schedule Index</div>
              <div class="report-pillar-status" style="color:var(--accent2)">Tracking</div>
            </div>
            <div class="report-pillar">
              <div class="report-pillar-score" style="color:var(--danger)">+3.2%</div>
              <div class="report-pillar-label">Cost Variance</div>
              <div class="report-pillar-status" style="color:var(--danger)">Monitor</div>
            </div>
          </div>

          <div style="font-size:10px;font-weight:700;letter-spacing:0.14em;text-transform:uppercase;color:var(--muted);margin-bottom:12px">Key Findings &amp; Recommendations</div>
          <div class="findings-list">
            <div class="finding-item critical-f">
              <div class="finding-icon">üî¥</div>
              <div class="finding-body">
                <div class="finding-title">CRITICAL: Switchgear Lead Time Extended</div>
                <div class="finding-desc">Vendor confirmed 6-week extension. Recommend immediate alternate vendor engagement. Schedule reserve fully consumed ‚Äî escalate to owner decision gate by Friday.</div>
              </div>
            </div>
            <div class="finding-item warn-f">
              <div class="finding-icon">üü°</div>
              <div class="finding-body">
                <div class="finding-title">HIGH: AHJ Permit Review Backlog</div>
                <div class="finding-desc">3-week review queue will impact MEP inspection milestone. Expedite filing submitted Week 21. Monitor weekly for confirmation.</div>
              </div>
            </div>
            <div class="finding-item ok-f">
              <div class="finding-icon">üü¢</div>
              <div class="finding-body">
                <div class="finding-title">ON TRACK: Foundation &amp; Structure Ahead of Baseline</div>
                <div class="finding-desc">Foundation complete 3 days early. Steel erection on schedule. No additional action required this period.</div>
              </div>
            </div>
          </div>

          <div class="divider"></div>
          <div class="export-bar">
            <div class="export-label">Export or distribute this report</div>
            <div class="export-actions">
              <button class="btn btn-ghost" onclick="exportReport('pdf')">‚Üì PDF</button>
              <button class="btn btn-ghost" onclick="exportReport('csv')">‚Üì CSV Data</button>
              <button class="btn btn-primary" onclick="exportReport('email')">‚úâ Send Now</button>
            </div>
          </div>
        </div>
      </div><!-- /report -->

      <!-- ‚îÄ‚îÄ SETTINGS ‚îÄ‚îÄ -->
      <div class="page" id="page-settings">
        <div class="page-header">
          <div>
            <div class="page-title">Project Settings</div>
            <div class="page-subtitle">Configure project details, thresholds, and display preferences</div>
          </div>
          <button class="btn btn-primary" onclick="saveSettings()">Save Changes</button>
        </div>
        <div class="grid-2">
          <div class="card">
            <div class="card-title">Project Info</div>
            <div style="display:flex;flex-direction:column;gap:12px">
              <div class="form-row"><label class="form-label">Project Name</label><input class="form-input" value="DC-Phoenix-01"></div>
              <div class="form-row"><label class="form-label">Owner / Developer</label><input class="form-input" value="Acme Capital Partners"></div>
              <div class="form-row"><label class="form-label">Total Budget ($M)</label><input class="form-input" type="number" value="185"></div>
              <div class="form-row"><label class="form-label">Target Completion</label><input class="form-input" type="date" value="2025-12-15"></div>
              <div class="form-row"><label class="form-label">GC / CM Firm</label><input class="form-input" value="Meridian Construction Group"></div>
            </div>
          </div>
          <div class="card">
            <div class="card-title">Risk Thresholds</div>
            <div style="display:flex;flex-direction:column;gap:14px">
              <div class="slider-row">
                <div class="slider-header">
                  <span class="slider-label">Critical Risk Threshold</span>
                  <span class="slider-val" style="color:var(--danger)">75</span>
                </div>
                <input type="range" min="50" max="100" value="75" style="background:linear-gradient(to right,var(--danger) 50%,var(--border) 50%)">
              </div>
              <div class="slider-row">
                <div class="slider-header">
                  <span class="slider-label">Budget Variance Alert (%)</span>
                  <span class="slider-val" style="color:var(--warn)">5%</span>
                </div>
                <input type="range" min="1" max="20" value="5" style="background:linear-gradient(to right,var(--warn) 25%,var(--border) 25%)">
              </div>
              <div class="slider-row">
                <div class="slider-header">
                  <span class="slider-label">Schedule Float Warning (days)</span>
                  <span class="slider-val" style="color:var(--accent2)">7</span>
                </div>
                <input type="range" min="1" max="30" value="7" style="background:linear-gradient(to right,var(--accent2) 23%,var(--border) 23%)">
              </div>
              <div class="form-row">
                <label class="form-label">Auto-Escalation Email</label>
                <input class="form-input" value="owner@acmecapital.com">
              </div>
            </div>
          </div>
        </div>
      </div>

    </div><!-- /content -->
  </div><!-- /main -->
</div><!-- /shell -->

<script>
// ‚îÄ‚îÄ STATE ‚îÄ‚îÄ
const projects = {
  dc1: { name:'DC-Phoenix-01', budget:185, weeks:52, current:22 },
  dc2: { name:'DC-Austin-02', budget:240, weeks:64, current:8 },
  dev1:{ name:'Mixed-Use Denver', budget:95, weeks:40, current:31 }
};
let currentProject = 'dc1';

let risks = [
  { id:1, title:'Switchgear Lead Time +6 Weeks', cat:'Procurement', prob:90, impact:5, owner:'Ops Lead', mit:'Alternate vendor RFQ issued', severity:'critical' },
  { id:2, title:'AHJ Permit Review Backlog', cat:'Permitting', prob:75, impact:4, owner:'PM', mit:'Expedite filing submitted', severity:'critical' },
  { id:3, title:'Concrete Batch Plant Strike', cat:'Schedule', prob:40, impact:5, owner:'GC', mit:'Alternate plant identified', severity:'critical' },
  { id:4, title:'Labor Rate Escalation', cat:'Cost', prob:60, impact:3, owner:'Owner', mit:'GMP signed through Q3', severity:'high' },
  { id:5, title:'Design RFI Backlog', cat:'Quality', prob:55, impact:3, owner:'Arch.', mit:'Priority list issued', severity:'high' },
  { id:6, title:'Soil Contamination Discovery', cat:'Cost', prob:25, impact:4, owner:'GC', mit:'Environmental review ordered', severity:'medium' },
  { id:7, title:'Safety Near-Miss Rate', cat:'Safety', prob:35, impact:2, owner:'Safety Mgr', mit:'Toolbox talks increased', severity:'medium' },
];
let nextRiskId = 8;

let phases = [
  { id:1, name:'Site Work & Earthwork', duration:8, status:'complete', dep:null },
  { id:2, name:'Foundation & Concrete', duration:10, status:'complete', dep:1 },
  { id:3, name:'Steel Structure', duration:12, status:'active', dep:2 },
  { id:4, name:'Envelope & Roofing', duration:8, status:'pending', dep:3 },
  { id:5, name:'MEP Rough-In', duration:14, status:'pending', dep:3 },
  { id:6, name:'Electrical / Switchgear', duration:10, status:'risk', dep:5 },
  { id:7, name:'Fit-Out & Finishes', duration:6, status:'pending', dep:[4,5] },
  { id:8, name:'Commissioning & Testing', duration:8, status:'pending', dep:6 },
  { id:9, name:'Certificate of Occupancy', duration:2, status:'pending', dep:8 },
];

const scenarios = {
  base:        { title:'Baseline Scenario', desc:'Your current plan with no disruptions. Benchmark for all comparisons.',
                 duration:52, cost:185, risk:62, revenue:0, color:'var(--accent)' },
  weather:     { title:'Weather Delay Scenario', desc:'Models 4-week weather disruption impacting site work and envelope phases.',
                 duration:57, cost:192, risk:71, revenue:-4.2, color:'var(--accent2)' },
  procurement: { title:'Procurement Slip Scenario', desc:'Switchgear delay extends 10 additional weeks ‚Äî cascading MEP impact.',
                 duration:64, cost:203, risk:84, revenue:-11.5, color:'var(--warn)' },
  scope:       { title:'Scope Change Scenario', desc:'+15% scope addition to electrical infrastructure for future expansion.',
                 duration:58, cost:218, risk:68, revenue:8.2, color:'var(--gold)' },
  labor:       { title:'Labor Shortage Scenario', desc:'30% labor productivity reduction due to regional shortage ‚Äî all phases impacted.',
                 duration:66, cost:209, risk:79, revenue:-15.8, color:'var(--danger)' }
};
let activeScenario = 'base';

// ‚îÄ‚îÄ INIT ‚îÄ‚îÄ
document.addEventListener('DOMContentLoaded', () => {
  updateClock();
  setInterval(updateClock, 1000);
  renderRisks();
  renderPhases();
  renderGantt();
  renderDurationSliders();
  renderScenario('base');
  renderComparisonTable();
  document.getElementById('rptGenTime').textContent = new Date().toLocaleString('en-US',{month:'short',day:'numeric',hour:'numeric',minute:'2-digit'});
});

function updateClock(){
  document.getElementById('liveTime').textContent = new Date().toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit',second:'2-digit'});
}

// ‚îÄ‚îÄ NAVIGATION ‚îÄ‚îÄ
function showPage(id, el) {
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
  document.getElementById('page-'+id).classList.add('active');
  if(el) el.classList.add('active');
  const titles = { dashboard:'Project Command Center', risk:'Risk Tracker', schedule:'Schedule Sequencer', whatif:'What-If Scenarios', report:'Auto-Report Generator', settings:'Project Settings' };
  document.getElementById('topbarTitle').textContent = titles[id] || id;
}

function switchProject(val) {
  currentProject = val;
  const p = projects[val];
  document.getElementById('dashSubtitle').textContent = `${p.name} ¬∑ Week ${p.current} of ${p.weeks} ¬∑ Updated just now`;
  document.getElementById('rptProjectName').textContent = p.name;
}

// ‚îÄ‚îÄ RISK MODULE ‚îÄ‚îÄ
function getSeverity(prob, impact) {
  const score = (prob/100) * impact;
  if(score >= 3.5) return 'critical';
  if(score >= 2.5) return 'high';
  if(score >= 1.5) return 'medium';
  return 'low';
}
function getScore(prob, impact){ return Math.round((prob/100)*impact*20); }

function renderRisks(filter='all') {
  const tbody = document.getElementById('riskBody');
  const filtered = filter === 'all' ? risks : risks.filter(r=>r.cat===filter);
  tbody.innerHTML = filtered.map(r => {
    const score = getScore(r.prob, r.impact);
    const barColor = r.severity==='critical'?'var(--danger)':r.severity==='high'?'var(--warn)':r.severity==='medium'?'var(--gold)':'var(--accent)';
    return `<tr>
      <td style="font-weight:600;max-width:180px">${r.title}</td>
      <td><span class="tag">${r.cat}</span></td>
      <td><span class="risk-badge ${r.severity}">${r.severity}</span></td>
      <td style="min-width:80px">
        <div style="display:flex;align-items:center;gap:8px">
          <span style="font-family:'Syne',sans-serif;font-size:13px;font-weight:700;color:${barColor}">${score}</span>
          <div class="score-bar-wrap" style="flex:1"><div class="score-bar" style="width:${score}%;background:${barColor}"></div></div>
        </div>
      </td>
      <td style="color:var(--muted)">${r.owner}</td>
      <td><button class="btn btn-ghost" style="padding:4px 10px;font-size:10px" onclick="resolveRisk(${r.id})">Resolve</button></td>
    </tr>`;
  }).join('');
  updateGauge();
  updateBreakdown();
}

function filterRisks(val){ renderRisks(val); }

function updateGauge() {
  const crits = risks.filter(r=>r.severity==='critical').length;
  const highs = risks.filter(r=>r.severity==='high').length;
  const score = Math.min(100, Math.round((crits*15 + highs*8 + risks.filter(r=>r.severity==='medium').length*4)));
  const gaugeEl = document.getElementById('gaugeCircle');
  const scoreEl = document.getElementById('gaugeScore');
  const statusEl = document.getElementById('gaugeStatus');
  const pct = score / 100;
  const color = score > 70 ? 'var(--danger)' : score > 45 ? 'var(--warn)' : 'var(--accent)';
  gaugeEl.style.background = `conic-gradient(${color} 0% ${pct*100}%, var(--border) ${pct*100}% 100%)`;
  scoreEl.textContent = score;
  scoreEl.style.color = color;
  statusEl.textContent = crits > 0 ? `Elevated ‚Äî ${crits} critical item${crits>1?'s':''} require action` : score > 45 ? 'Moderate ‚Äî monitor weekly' : 'Healthy ‚Äî no immediate action';
  document.getElementById('dashRisks').textContent = risks.length;
}

function updateBreakdown() {
  const c = risks.filter(r=>r.severity==='critical').length;
  const h = risks.filter(r=>r.severity==='high').length;
  const m = risks.filter(r=>r.severity==='medium').length;
  const total = risks.length || 1;
  document.getElementById('critCount').textContent = c;
  document.getElementById('highCount').textContent = h;
  document.getElementById('medCount').textContent = m;
  document.getElementById('critBar').style.width = (c/total*100)+'%';
  document.getElementById('highBar').style.width = (h/total*100)+'%';
  document.getElementById('medBar').style.width = (m/total*100)+'%';
}

function resolveRisk(id) {
  risks = risks.filter(r=>r.id!==id);
  renderRisks();
}

function openModal(){ document.getElementById('riskModal').classList.add('open'); }
function closeModal(){ document.getElementById('riskModal').classList.remove('open'); }

function updateSlider(type, val) {
  if(type==='prob'){
    document.getElementById('probVal').textContent = val+'%';
    document.getElementById('probSlider').style.background = `linear-gradient(to right,var(--warn) ${val}%,var(--border) ${val}%)`;
  } else {
    document.getElementById('impactVal').textContent = val;
    const pct = (val-1)/4*100;
    document.getElementById('impactSlider').style.background = `linear-gradient(to right,var(--danger) ${pct}%,var(--border) ${pct}%)`;
  }
}

function addRisk() {
  const title = document.getElementById('newRiskTitle').value.trim();
  if(!title){ alert('Please enter a risk title'); return; }
  const prob = +document.getElementById('probSlider').value;
  const impact = +document.getElementById('impactSlider').value;
  const sev = getSeverity(prob, impact);
  risks.unshift({
    id: nextRiskId++,
    title, prob, impact, sev,
    severity: sev,
    cat: document.getElementById('newRiskCat').value,
    owner: document.getElementById('newRiskOwner').value || 'TBD',
    mit: document.getElementById('newRiskMit').value || 'Pending'
  });
  closeModal();
  renderRisks();
  document.getElementById('newRiskTitle').value='';
  document.getElementById('newRiskOwner').value='';
  document.getElementById('newRiskMit').value='';
}

// ‚îÄ‚îÄ SCHEDULE MODULE ‚îÄ‚îÄ
function renderPhases() {
  const list = document.getElementById('phaseList');
  list.innerHTML = phases.map((p,i) => {
    const hasConflict = p.status === 'risk';
    const statusColors = { complete:'var(--accent)', active:'var(--accent2)', pending:'var(--muted)', risk:'var(--danger)' };
    return `<div class="phase-item" draggable="true" data-id="${p.id}"
        ondragstart="dragStart(event,${i})" ondragover="dragOver(event)" ondrop="drop(event,${i})" ondragend="dragEnd()">
      <span class="phase-drag">‚†ø</span>
      <span class="phase-num" style="background:${statusColors[p.status]}20;color:${statusColors[p.status]}">${i+1}</span>
      <div class="phase-info">
        <div class="phase-name">${p.name}</div>
        <div class="phase-meta">${p.dep ? `After Phase ${Array.isArray(p.dep)?p.dep.join(' & '):p.dep}` : 'No predecessor'}</div>
      </div>
      <span class="phase-duration">${p.duration}w</span>
      <div class="phase-status">
        ${hasConflict ? '<span class="conflict-flag">‚ö† At Risk</span>' : p.status==='complete' ? '<span class="ok-flag">‚úì Done</span>' : p.status==='active' ? '<span class="ok-flag" style="color:var(--accent2);border-color:rgba(0,150,255,0.3)">‚óè Active</span>' : ''}
      </div>
    </div>`;
  }).join('');
  updateSeqAnalysis();
}

let dragIdx = null;
function dragStart(e,i){ dragIdx=i; e.target.classList.add('dragging'); }
function dragEnd(){ document.querySelectorAll('.phase-item').forEach(el=>el.classList.remove('dragging')); }
function dragOver(e){ e.preventDefault(); }
function drop(e,targetIdx){
  e.preventDefault();
  if(dragIdx===null||dragIdx===targetIdx) return;
  const moved = phases.splice(dragIdx,1)[0];
  phases.splice(targetIdx,0,moved);
  dragIdx=null;
  renderPhases();
  renderGantt();
}

function updateSeqAnalysis(){
  const totalWeeks = phases.reduce((a,p)=>a+p.duration,0);
  const risks = phases.filter(p=>p.status==='risk').length;
  const txt = risks > 0
    ? `‚ö† ${risks} phase${risks>1?'s':''} flagged at risk. Total projected duration: <strong style="color:var(--text)">${totalWeeks} weeks</strong> (${Math.round(totalWeeks/52*12)} months). Review highlighted phases for sequencing conflicts.`
    : `‚úì No sequencing conflicts detected. Total projected duration: <strong style="color:var(--accent)">${totalWeeks} weeks</strong> (${Math.round(totalWeeks/52*12)} months). Sequence is optimized.`;
  document.getElementById('seqAnalysis').innerHTML = txt;
}

function renderGantt(){
  const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
  let html = `<div class="gantt-header">
    <div class="gantt-label-head">Phase</div>
    <div class="gantt-months">${months.map(m=>`<div class="gantt-month">${m}</div>`).join('')}</div>
  </div>`;
  const colors = ['var(--accent)','var(--accent2)','var(--gold)','var(--warn)','#a78bfa','var(--danger)','var(--accent)','var(--accent2)','var(--gold)'];
  let cumulative = 0;
  const totalWeeks = phases.reduce((a,p)=>a+p.duration,0);
  phases.forEach((p,i) => {
    const left = (cumulative / totalWeeks) * 100;
    const width = (p.duration / totalWeeks) * 100;
    html += `<div class="gantt-row">
      <div class="gantt-row-label" style="font-size:11px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">${p.name}</div>
      <div class="gantt-timeline" style="position:relative">
        <div class="gantt-bar" style="left:${left}%;width:${width}%;background:${colors[i%colors.length]};opacity:${p.status==='complete'?0.5:1}">
          ${width > 8 ? `${p.duration}w` : ''}
        </div>
      </div>
    </div>`;
    cumulative += p.duration;
  });
  document.getElementById('ganttChart').innerHTML = html;
}

function renderDurationSliders(){
  const container = document.getElementById('durationSliders');
  container.innerHTML = phases.slice(0,4).map(p => `
    <div class="slider-row" style="margin-bottom:10px">
      <div class="slider-header">
        <span class="slider-label" style="font-size:10px">${p.name.substring(0,24)}</span>
        <span style="font-family:'Syne',sans-serif;font-size:13px;font-weight:700;color:var(--accent)">${p.duration}w</span>
      </div>
      <input type="range" min="2" max="24" value="${p.duration}" 
        style="background:linear-gradient(to right,var(--accent) ${(p.duration/24)*100}%,var(--border) ${(p.duration/24)*100}%)"
        oninput="updatePhaseDuration(${p.id},this.value,this)">
    </div>
  `).join('');
}

function updatePhaseDuration(id, val, el) {
  const phase = phases.find(p=>p.id===id);
  if(phase) phase.duration = +val;
  el.nextSibling && (el.nextSibling.textContent = val+'w');
  el.style.background = `linear-gradient(to right,var(--accent) ${(val/24)*100}%,var(--border) ${(val/24)*100}%)`;
  el.previousElementSibling.querySelector('span:last-child').textContent = val+'w';
  renderPhases();
  renderGantt();
}

function resetSequence(){
  phases.sort((a,b)=>a.id-b.id);
  renderPhases();
  renderGantt();
}

function optimizeSequence(){
  // Sort: completed first, then active, then by duration ascending for non-risk, risk last
  const order = { complete:0, active:1, pending:2, risk:3 };
  phases.sort((a,b)=>(order[a.status]||2)-(order[b.status]||2)||a.duration-b.duration);
  renderPhases();
  renderGantt();
  // Show feedback
  document.getElementById('seqAnalysis').innerHTML = `<span style="color:var(--accent)">‚ö° AI Optimized:</span> Phases reordered to minimize critical path exposure. Completion-first sequencing applied ‚Äî ${phases.filter(p=>p.status==='risk').length} flagged phases surfaced for review.`;
}

// ‚îÄ‚îÄ WHAT-IF MODULE ‚îÄ‚îÄ
function selectScenario(key, el){
  document.querySelectorAll('.scenario-tab').forEach(t=>t.classList.remove('active'));
  el.classList.add('active');
  renderScenario(key);
}

function renderScenario(key){
  activeScenario = key;
  const s = scenarios[key];
  document.getElementById('scenarioTitle').textContent = s.title;
  document.getElementById('scenarioDesc').textContent = s.desc;
  const base = scenarios.base;

  // Results
  const durDelta = s.duration - base.duration;
  const costDelta = s.cost - base.cost;
  const revSign = s.revenue >= 0 ? '+' : '';

  document.getElementById('scenarioResults').innerHTML = `
    <div class="scenario-result">
      <div style="font-family:'Syne',sans-serif;font-size:13px;font-weight:700;color:${s.color};letter-spacing:0.06em;text-transform:uppercase;margin-bottom:4px">${s.title}</div>
      <div class="scenario-metric">
        <span class="scenario-metric-label">Total Duration</span>
        <span class="scenario-metric-val" style="color:${s.color}">${s.duration}w
          ${key!=='base'?`<span class="delta-pill ${durDelta>0?'delta-neg':'delta-pos'}">+${durDelta}w</span>`:''}
        </span>
      </div>
      <div class="scenario-metric">
        <span class="scenario-metric-label">Estimated Cost</span>
        <span class="scenario-metric-val">$${s.cost}M
          ${key!=='base'?`<span class="delta-pill ${costDelta>0?'delta-neg':'delta-pos'}">+$${costDelta}M</span>`:''}
        </span>
      </div>
      <div class="scenario-metric">
        <span class="scenario-metric-label">Risk Score</span>
        <span class="scenario-metric-val" style="color:${s.risk>75?'var(--danger)':s.risk>55?'var(--warn)':'var(--accent)'}">${s.risk}/100</span>
      </div>
      <div class="scenario-metric">
        <span class="scenario-metric-label">Revenue Impact</span>
        <span class="scenario-metric-val" style="color:${s.revenue<0?'var(--danger)':s.revenue>0?'var(--accent)':'var(--muted)'}">${revSign}$${Math.abs(s.revenue)}M</span>
      </div>
    </div>
    <div class="scenario-result">
      <div style="font-family:'Syne',sans-serif;font-size:13px;font-weight:700;color:var(--muted);letter-spacing:0.06em;text-transform:uppercase;margin-bottom:4px">vs. Baseline</div>
      <div style="display:flex;flex-direction:column;gap:10px">
        ${['Schedule','Cost','Risk','Revenue'].map((label,i)=>{
          const vals = [[base.duration,s.duration,'w'],[base.cost,s.cost,'M'],[base.risk,s.risk,''],[0,s.revenue,'M']];
          const [bv,sv,unit] = vals[i];
          const delta = sv - bv;
          const isNeg = label==='Revenue' ? delta < 0 : delta > 0;
          const sign = delta >= 0 ? '+' : '';
          return `<div>
            <div style="display:flex;justify-content:space-between;margin-bottom:4px">
              <span style="font-size:11px;color:var(--muted)">${label}</span>
              <span style="font-size:11px;font-weight:600;color:${delta===0?'var(--muted)':isNeg?'var(--danger)':'var(--accent)'}">${sign}${delta}${unit}</span>
            </div>
            <div class="progress-track"><div class="progress-fill" style="width:${Math.min(100,Math.abs(delta/bv*100+50))}%;background:${delta===0?'var(--muted)':isNeg?'var(--danger)':'var(--accent)'}"></div></div>
          </div>`;
        }).join('')}
      </div>
    </div>
  `;
  renderComparisonTable();
}

function renderComparisonTable(){
  const tbody = document.getElementById('compBody');
  const base = scenarios.base;
  tbody.innerHTML = Object.entries(scenarios).map(([key,s])=>{
    const isBase = key==='base';
    const durDelta = s.duration-base.duration;
    const rec = isBase?'‚Äî':durDelta<=4?'<span style="color:var(--accent)">Manageable</span>':durDelta<=12?'<span style="color:var(--warn)">Escalate</span>':'<span style="color:var(--danger)">High Alert</span>';
    return `<tr style="${key===activeScenario?'background:rgba(255,255,255,0.03)':''}">
      <td style="font-weight:600">${s.title.replace(' Scenario','')}</td>
      <td>${s.duration}w ${!isBase&&durDelta>0?`<span style="color:var(--danger);font-size:11px">+${durDelta}w</span>`:''}</td>
      <td>$${s.cost}M</td>
      <td><span class="risk-badge ${s.risk>75?'critical':s.risk>55?'high':'low'}">${s.risk}</span></td>
      <td style="color:${s.revenue<0?'var(--danger)':s.revenue>0?'var(--accent)':'var(--muted)'}">${s.revenue>=0?'+':''}$${s.revenue}M</td>
      <td>${rec}</td>
    </tr>`;
  }).join('');
}

// ‚îÄ‚îÄ REPORT MODULE ‚îÄ‚îÄ
function generateReport(){
  document.getElementById('rptGenTime').textContent = new Date().toLocaleString('en-US',{month:'short',day:'numeric',hour:'numeric',minute:'2-digit'});
  document.getElementById('rptProjectName').textContent = projects[currentProject].name;
  const preview = document.getElementById('reportPreview');
  preview.style.border = '1px solid var(--accent)';
  setTimeout(()=>preview.style.border='1px solid var(--border)',2000);
}

function exportReport(type){
  const msgs = {
    pdf:'PDF report prepared ‚Äî in a live environment this would download.',
    csv:'CSV data export prepared ‚Äî in a live environment this would download.',
    email:`Report queued for distribution to: ${document.getElementById('reportDist').value}`
  };
  const notif = document.createElement('div');
  notif.style.cssText = 'position:fixed;bottom:24px;right:24px;background:var(--accent);color:#07080c;padding:12px 20px;border-radius:8px;font-weight:600;font-size:13px;z-index:999;animation:fadeIn 0.3s ease';
  notif.textContent = msgs[type];
  document.body.appendChild(notif);
  setTimeout(()=>notif.remove(),3500);
}

function saveSettings(){
  const notif = document.createElement('div');
  notif.style.cssText = 'position:fixed;bottom:24px;right:24px;background:var(--accent);color:#07080c;padding:12px 20px;border-radius:8px;font-weight:600;font-size:13px;z-index:999;animation:fadeIn 0.3s ease';
  notif.textContent = '‚úì Project settings saved';
  document.body.appendChild(notif);
  setTimeout(()=>notif.remove(),2500);
}
</script>
</body>
</html>
